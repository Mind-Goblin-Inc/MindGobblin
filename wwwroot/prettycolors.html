<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Layered Paper Flow</title>
  <style>
    :root {
      --bg: #050914;
      --bg2: #151b2c;
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      min-height: 100vh;
      background:
        radial-gradient(circle at 20% 20%, #273048 0, transparent 55%),
        radial-gradient(circle at 80% 80%, #1b253d 0, transparent 55%),
        radial-gradient(circle at 50% 50%, #070c18 0, #02030a 60%);
      color: #f5f5f5;
      overflow: hidden;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI",
        sans-serif;
    }

    /* Scene with perspective */
    .scene {
      position: fixed;
      inset: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      perspective: 1200px;
      overflow: visible;
      pointer-events: none;
    }

    /* Paper layer */
    .page {
      position: absolute;
      width: min(70vw, 900px);
      height: min(70vh, 600px);
      border-radius: 32px;
      box-shadow:
        0 22px 55px rgba(0, 0, 0, 0.65),
        0 0 0 1px rgba(255, 255, 255, 0.03);
      transform-style: preserve-3d;
      opacity: 0;

      /* Hole mask (center cutout) using CSS variables */
      --hole-x: 50%;
      --hole-y: 50%;
      --hole-inner: 16%;
      --hole-outer: 28%;

      /* We draw a full rectangle but "punch a hole" in the middle
         via mask-image (transparent center = see-through) */
      -webkit-mask-image: radial-gradient(
        circle at var(--hole-x) var(--hole-y),
        transparent 0 var(--hole-inner),
        black var(--hole-outer) 100%
      );
      mask-image: radial-gradient(
        circle at var(--hole-x) var(--hole-y),
        transparent 0 var(--hole-inner),
        black var(--hole-outer) 100%
      );
      -webkit-mask-repeat: no-repeat;
      mask-repeat: no-repeat;

      /* Animation variables */
      --tilt-z: 0deg;
      --depth-z: 0px;

      animation: fall 12s linear infinite;
    }

    /* Paper texture / subtle grain */
    .page::after {
      content: "";
      position: absolute;
      inset: 0;
      border-radius: inherit;
      pointer-events: none;
      background-image:
        repeating-linear-gradient(
          135deg,
          rgba(255, 255, 255, 0.025) 0,
          rgba(255, 255, 255, 0.025) 1px,
          transparent 1px,
          transparent 3px
        ),
        radial-gradient(circle at 10% 15%, rgba(255, 255, 255, 0.06), transparent 55%),
        radial-gradient(circle at 80% 80%, rgba(255, 255, 255, 0.05), transparent 55%);
      mix-blend-mode: soft-light;
      opacity: 0.8;
    }

    /* Falling / receding animation */
    @keyframes fall {
      0% {
        transform:
          translate3d(0, -95vh, var(--depth-z))
          rotateX(60deg)
          rotateZ(var(--tilt-z))
          scale(1.05);
        opacity: 0;
      }
      10% {
        opacity: 1;
      }
      40% {
        transform:
          translate3d(0, -5vh, calc(var(--depth-z) + 120px))
          rotateX(68deg)
          rotateZ(calc(var(--tilt-z) + 3deg))
          scale(1);
      }
      70% {
        transform:
          translate3d(0, 40vh, calc(var(--depth-z) + 360px))
          rotateX(75deg)
          rotateZ(calc(var(--tilt-z) + 8deg))
          scale(0.96);
        opacity: 0.9;
      }
      100% {
        transform:
          translate3d(0, 95vh, calc(var(--depth-z) + 600px))
          rotateX(80deg)
          rotateZ(calc(var(--tilt-z) + 14deg))
          scale(0.9);
        opacity: 0;
      }
    }

    /* Optional tiny caption in a corner so you know what this is */
    .label {
      position: fixed;
      left: 16px;
      bottom: 14px;
      font-size: 11px;
      letter-spacing: 0.13em;
      text-transform: uppercase;
      opacity: 0.65;
      pointer-events: none;
      user-select: none;
    }
  </style>
</head>
<body>
  <div class="scene" id="scene"></div>
  <div class="label">Layered Paper Flow Demo</div>

  <script>
    const NUM_PAGES = 10;
    const scene = document.getElementById("scene");
    const DURATION = 12; // seconds

    function randomBetween(min, max) {
      return min + Math.random() * (max - min);
    }

    // Randomize a page's look (hole shape, color, depth, tilt)
    function randomizePage(page, index) {
      // Random color palette using HSL
      const baseHue = Math.floor(Math.random() * 360);
      const offset = randomBetween(30, 80);
      const hue2 = (baseHue + offset) % 360;

      const gradAngle = Math.floor(Math.random() * 360);

      page.style.background = `
        linear-gradient(${gradAngle}deg,
          hsla(${baseHue}, 80%, 65%, 0.9),
          hsla(${hue2}, 80%, 25%, 0.95)
        )
      `;

      // Randomize cutout position & size
      const holeX = randomBetween(30, 70);  // percent
      const holeY = randomBetween(30, 70);  // percent
      const inner = randomBetween(8, 18);   // inner radius (%)
      const outer = inner + randomBetween(10, 22); // outer radius (%)

      page.style.setProperty("--hole-x", holeX + "%");
      page.style.setProperty("--hole-y", holeY + "%");
      page.style.setProperty("--hole-inner", inner + "%");
      page.style.setProperty("--hole-outer", outer + "%");

      // Depth & tilt so pages overlap interestingly
      const depth = randomBetween(-150, 250); // px
      const tiltZ = randomBetween(-14, 14);   // deg

      page.style.setProperty("--depth-z", depth + "px");
      page.style.setProperty("--tilt-z", tiltZ + "deg");
    }

    function createPages() {
      for (let i = 0; i < NUM_PAGES; i++) {
        const page = document.createElement("div");
        page.className = "page";

        // Stagger animation so flow is continuous
        const offset = (DURATION / NUM_PAGES) * i;
        page.style.animationDelay = -offset + "s";

        randomizePage(page, i);

        // Every time it finishes a cycle, change its look
        page.addEventListener("animationiteration", () => {
          randomizePage(page, i);
        });

        scene.appendChild(page);
      }
    }

    createPages();
  </script>
</body>
</html>
